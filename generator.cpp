#include <iostream>
#include <string>
#include <fstream>
#include <cstdlib>
#include <filesystem>

using namespace std;

// Functions
void WIN32();
void UNIX();

void generator(string IPath, string OPath, string FP);

// Variables
string IFile {};
string OFile {};
string file {};

string header = R"(
...........................................!"`''````'``^!...........................................
........................................."^``^",::::,"^```,.........................................
......................................."``":;;II;;;;;I;;:"`'`.......................................
.....................................!^'";;;;;;;;;;;;;;;;I;"'`I.....................................
...................................."'`,;;;;;;;;;;;;;;;;;;;;:`'.....................................
...................................''^;;;;;;;;;;;;;;;;;;;;;;;;^`;...................................
..................................''";;;;;;;;;;;;;;;;;;;;;;;;;;"^;..................................
.................................!`^;;;;;;;;;;;;;;;;;;;;;;;;;;;;"'`.................................
...............!,"`'.``.^`':.....^^;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;^`.....:'`^.`^''`",!...............
.............,```^",,,,,"^``'`":"`;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;``;^````^",,,,,"^```".............
..........."``^:;;III;III;;"^^```,I;;;;::;;;;;;;;;;;;;;;;;;;;;;;;I:```^^";;II;;III;;:"``:...........
.........!``^:;;;;;;;;;;;;;;;;:^`;;;;;;::;;;;;;;;;;;;;;;;;:::;;;;;;^`:;;;;;;;;;;;;;;;;:"`^!.........
........:``,;;;;;;;;;;;;;;;;;;;`,;;;;;;;;::,,:;;;;;;;;;::,,;;;;;;:;:`;;;;;;;;;;;;;;;;;;;,``:........
.......^`^:;;;;;;;;;;;;;;;;;;;:`;;;;;;;:",;;;;;;;;;;;;;;;;^;;;;;;:;;^:;;;;;;;;;;;;;;;;;;;:^``.......
......"'^:;;;;;;;;;;;;;;;;;;;I"^;,,;;;;:;;;;;;;;;,,;;;;;;;"";;;;;,,;"^;;;;;;;;;;;;;;;;;;;;;"'^......
....."`^;;;;;;;;;;;;;;;:;;;;;;`,I,`:;;;;;"``^;;:,:::;;;:"```;;;:,`,;:`;;;;;;:;;;;;;;;;;;;;;;^`,.....
....;``:;;;;;;;;;;;;;;;;;;;;;:`:;^':;;:"`''''^;,,;;,,I:^''''^,:::`":;`,;;;;;;;;;;;;;;;;;;;;;:^',....
....^`,;;;;;;;;;;;;;;;;;;;;;I"`::`,:,"`'''''''^";;;:";,''''''`",,;`^;^^I;;;;;;;;;;;;;;;;;;;;;:``....
...!`^;;;;;;;;;;;;;;;;:;;;;;;^^,^";"`'''''''''':;;;;"""'''''''''";"':"`;;;;;;:;;;;;;;;;;;;;;;;"`I...
..."`";;;;;;;;;;;;;;;;:;;;;;;``^`:,`'''''''''',;;;;;;``'''''''''`,:`,^`;;;;;;:;;;;;;;;;;;;;;;;"`"...
...^`:;;;;;;:;;;;::;;;,:;;;;;``'^;:''''''''''`;:;;;I;"''''''''''',;^"`':;;;;;,;;;::;;;;:;;;;;;:^`...
...`";;;;;;;;I;:;;:,;;,:;;;I:''':I,''''''''''":",,,:",''''''''''',I,`'',I;;;:,;;,:;;:;I;;;;;;;;"^...
...^^;;;:,;;;,^^``^:::,":I;:^''':I^''''''''''":^''''^:`''''''''''^I:'''^:;I;",:::"``^^,;;;::;;;^^...
..l`";;;;;;::`''''''";:"":^``'''":`'''''''''',:^''''`:`''''''''''`:,''```^,"^:;,''''''`::;;;;;;"`:..
..^',;",,::",`'''''''^::`''''``'`:^'''''^^''':,`''''',"'''`"'''''^:^````'''`::^'''''''`,",:,,";:``..
..'",`'`";;:,^'''''''`;I,''''```:I,'''''''''":`'''`''^,,"`'`'''''"I:`'''''',I;`'''''''^,:;;,`'`,"`:.
.,`"''''"I;;:"``'''''':I:''''''`;I:``````^",;,`''``''`::::,^`````:;;^''`''',I:''''''``":;;I,''''"`,.
.,^`'''':I:;;,^"''''''";;`''''',;,,,,:;;;:":;,'''^'''',;:,:;;;;:,,:;,'''''':;"''''''^^,;;:I:''''`^".
.`^^'''':;:;;,^,''''''^;;,''''`:,`'''":;^'";;"'''^`'''^;;:;,",,`''";:`''''";;"'''''',",;;:;:''''^"^.
.^,"^''";;:;,:^,'^^'''":;;`'''`,;"''`,;:'^,;;^'''""'''^;;,;;:^`'`^^::`'''':;:"'''^^',^::;:;;,''^",`.
.`","'`^,;;;",^,^`'''`^:;;`'''`;;;:,::;,`":;;,`'^::^'',;;:::I;;:;:,;;^'''';;:^`'''`^,^,";;;,^`'^,,`.
.'":^''''^:;;,^^^^^^^`";;;"^''";;:,,:,^^,;:;:;,",`""",;:;:`"I;:::::;I,''^";;;"`^^^^^^^,;;:^''''^:"..
.`";`''`''^;:;;:,""^^";;;;;;:`:;:;;;,""":,;;,;;;;:;;;;;,:;,",""":;;;;;`:;;;;;;,^^"",:;;:;"''`''`;"'.
.',,``'`''',::;;::::",;;;;;;;`",:;::,'^^^:;;;;;;;;;;;;;;;;;,":^::;;:""`;;;;;;;,"::::;I:::'''`'`',,'.
,',^'`'`''',;,,;,;;;:;:,;;;;I,`^^"''`'''^;;;:;::;::;::;:;;;,,^`"``"^"`,I;;;;,:;:;;;,;:,;,'''''`'`,'"
`,:^^"`^''':;:":;",I,,;::;:,;:```^`'''''";;;::"`"^",`^,:;;;::`''''"^``:;,:;::;,,I:";:":;:`''`^"^^,,`
`:;::"^"``^:;:,:;:""^^^^"^```^:"`"^''''^,;::,";:lll!:;,,:,;,:''''`"`^:^```^"^^^^"",;:,:;;"``"^^::::`
`^,;;^",;;;;;,;,;;,"`''''''''`,:`'`^^''':,^";l!l!!l!!!l;,`,:^''`"^'':,^''''''''`",;;,;,;;:;;:"^;;,"`
"^:;,,;:;;;;;,;;;;,,`''''''''''^``^:,`'^:`^:!!!l!!l!l!l!I^`,`''^;,``^''''''''''`,,;;;;,;;;;;;:,,;:^^
.',;`:;;;;;;;;;;;;:^^''''''''^,`,,,;,''""`lII,"`^^`"^"^;!l`^"'',;,,:',"''''''''^",;;;;;;;;;;;I:`::`!
I`"^^:,,:;;;;;;;;;;`^`''''''`;;^,;:;:''^^;I^`''''''''''`^Il^^`':;:;:`;;^'''''''``;;;;;;;;;;::,:^^"`I
!`'',,;,;,I::::;;;I"`''''''''^;^`;:;,''^l:`''''''''''''''^;:'`'";:;^^;"''''''''`^I;;;::::I,:,;,,''`:
..`^I!!;!l!;I,"",,;,''''''''''^:`::,`''`,''''''''''''''''''^'''',:,`:^''''''''''";,,"",I;!l!I!!I^`..
..':!!l";,I!!IlI::,,''''''''''';^,;`''''''''''''''''''''''''''''`;"^;`'''''''''',,::IlI!!I,;"ll!:'..
..`"""`''''":l!!I!!!^'''''''''":"^;^''''''''''''''''''''''''''''^I"^:,'''''''''`!!!l!ll:,`'''`"""'..
.."`II"'''''""":,ll:`'''''''',,::`::'''''''''''''''''''''''''''',I^,:,,`'''''''',Il,:,""'''''^II^`..
...`,ll"'''',;^^'``''''''''^:;:I;`,I^''''''''''''''''''''''''''`;:`;I:::^'''''''''`'^^:,''''^Il:^...
...I`,:l"'`'^;:,`'''''''''`;I;;;;^":`''''''''''''''''''''''''''`:^^;;;:I;^'''''''''`,:;^'`'^l:,',...
....,'`^`^^``:,^''''''''''";;;;;I"`":`''''''''''''''''''''''''`:^'"I;;;;;,''''''''''^":```"`^^`,....
......!'.```',,`''''''''''";;;;;;,',:"''''''''''''''''''''''''":"',I;;;;;"''''''''''`,,'```''!!.....
.........'^^`,:^''''''''''`,;;;;;:',::''''''''''''''''''''''''::"':I;;;;,^''''''''''`::`^^..........
.........'^:::,^`''''''''',:,;;;;:',:;^''''''''''''''''''''''^;:"':;;;;:,:'''''''''`^,:::^'.........
.........^`:;;:,`''''''''^!!;:;;;,'",;^''''''''''''''''''''''^;:"',;;;:;l!"''''''''',:;;:`".........
.........!`^:,,;,`''''''':Il;,;;;;`^",^'``''''''''''''''''``',:,"`:;;;";lI:'''''''',;,,:^'..........
.........."````:;,''''''"lI:;";;;,'""""";lI'''''''''''''';ll,;,,,',;;;";:Il"''''''";;^```:..........
...........!"''";^''''''"I!I;,;;:''"""";;!l^''''''''''''^l!l:;,,,'':;;,:;!I,''''''^;,''^............
.............'^Il^'''''`IlI;::;I,'^^^,,;:!!;'''''''''''';!!;:::""``,I;::;IlI`'''''^lI"^.............
..............,!l"^`''',ll;;::;;"`,``,;;"l!l`''''''''''`lll::::"`"^^;;::;:ll,'''``"l!:^.............
.............`;!l,,`'':ll;,;:;;,``.`'"I;:;!I:^''''''''^;!!,::,,`^.^`,;;:;:;ll;''`,,l!;`.............
............!';lI":`'^l!I:;;:,"^`".:'^;;:"ll!l;:,:,,,;!l!I^:,,"'".:`^",:;;:I!l^'':"IlI'!............
............:`;lI":''I!;:;;,,;,`,...'^;;::,;l!I!!!!!!I!I:,:",:^'...,'";,,;;:;!I`',,;l;`^............
............I^I!I":^;!I"::^";:`"....^`;I:;:",:;Il!llI:I:,:;,:;``....^`:;"^:;";lI^:";!I`,............
.............'"ll;;I;I^,I;,,;`'....."`::,,;:,",","":,:,:,,,,::'".....``;,,;I,^III;;ll"`!............
.............!````^"^^::;;:,^'!.....!`^::::;:,;,;,:;,;::,,:::^`,.....!`^::;;::^^"^`^``!.............
...............'`'``'":::;"^'........^',I;,,;:;:;,,;:;:;,,;I,''.......''^^;:::"'``'`'...............
................!"`''`";;,'`'.........'',;;:;;;;;::;;;;;:;I,`".........`^'";;"`''`"!................
.................."`''`^``^............'`,II;:;;;::;;;:;;I,'"............^'`^`'''^..................
...................:^''`^"..............^`^:I;;:,"",:;;I:"'`.............."^`'`^,...................
......................!.................."'`,;;IIIIII;;,`'`..................!......................
..........................................;^```^""""^``'`:..........................................
............................................:"'^'``'^'^,............................................

)";

int main() {
    
    #ifdef _WIN32
        WIN32();
    #elif defined(__linux__) || defined(__APPLE__)
        UNIX();
    #else
        #error "OS not implemented, sorry X_X"
    #endif

    return 0;
}

void WIN32(){
    string IPath {".\\Inputs"};
    string OPath {".\\Outputs"};
    string FP {"\\"};

    generator(IPath, OPath, FP);
}

void UNIX(){
    // This might work but I did't test it yet
    string IPath {"./Inputs"};
    string OPath {"./Outputs"};
    string FP {"/"};

    generator(IPath, OPath, FP);
}

void generator(string IPath, string OPath, string FP){

    if(!filesystem::exists(IPath)){
        system("mkdir Inputs");
    }
    if(!filesystem::exists(OPath)){
        system("mkdir Outputs");
    }

    system("cls");
    cout << header << endl;
    cout << "Welcome to ASCII art generator" << endl;
    cout << "Choose a file to make art :" << endl;
    cout << endl;
    bool hasFiles = false;
    for (const auto& entry : filesystem::directory_iterator(IPath)) {
        if (filesystem::is_regular_file(entry.path())){
            hasFiles = true;
            break;
        }
    }

    if (!hasFiles) {
        cout << "Looks like you don't have files in the Inputs folder..." << endl;
        cout << endl;
        return;
    }
    
    system(("dir /a-d /b " + IPath).c_str());
    cout << endl;
    cout << "File: ";
    getline(cin, file);
    system(("mkdir " + OPath + FP + file).c_str());
    IFile = IPath+  FP  + file;
    cout << endl;
    system(("python ." + FP + "ASCII.py " + IFile).c_str());
    system(("move ." + FP + "ascii_image.txt " + OPath +  FP  + file + FP + "ascii_image.txt" ).c_str());
    system(("ren " + OPath +  FP  + file + FP + "ascii_image.txt" + " ACSII.txt").c_str());
}

// Developed by Hugo Martin Nacarino - 2024